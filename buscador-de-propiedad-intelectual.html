<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador | Aula PI</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="duero-compressed.png">
</head>
<body>
    <!-- ====== CABECERA / NAVBAR ====== -->
    <header>
        <nav class="navbar">
            <a href="https://opensciencelab-uc3m.github.io/aulapi/" class="logo">Aula PI</a>
            <ul class="nav-links">
                <li><a href="https://opensciencelab-uc3m.github.io/aulapi/">Inicio</a></li>
                <li><a href="asistente-educativo.html">Asistente educativo</a></li>
                <li><a href="buscador-de-propiedad-intelectual.html">Buscador de propiedad intelectual</a></li>
                <li><a href="legislacion-y-material-didactico.html">Legislación y material didáctico</a></li>
            </ul>
            <div class="menu-icon" id="menu-icon">&#9776;</div>
        </nav>
    </header>

    <!-- ====== SCRIPTS PREVIOS ====== -->
    <script src="script.js"></script>

    <!-- ====== CONTENIDO PRINCIPAL ====== -->
    <main>
        <section class="container">
            <!-- Hero con título e imagen -->
            <section class="hero" style="max-width: 1080px !important;">
                <img src="buscador-compressed.png" alt="Icono Buscador" class="icon-recursos2">
                <h1>Buscador de patentes y registros de universidades de Castilla y León</h1>
                <p>
                    Conoce las distintas tipologías de propiedad industrial e intelectual —como patentes, marcas, 
                    diseños o derechos de autor— registradas por las universidades de Castilla y León que forman 
                    parte de la Red TCUE (Transferencia de Conocimiento Universidad-Empresa).
                </p>
            </section>

            <!-- Mapa incrustado de Flourish -->
            <div class="flourish-embed flourish-map" data-src="visualisation/24699217" style="border: 1px solid #c2c2c2; border-radius: 20px; padding: 10px; margin-top: -20px;">
                <script src="https://public.flourish.studio/resources/embed.js"></script>
                <noscript>
                    <img src="https://public.flourish.studio/visualisation/24699217/thumbnail" width="100%" alt="map visualization" />
                </noscript>
            </div>
            <br>
            <br>

            <!-- Barra de búsqueda -->
            <input id="search" placeholder="Buscar por título, universidad o palabra clave..." type="text"/>

            <!-- Filtros -->
            <div class="filters">
                <select id="universityFilter">
                    <option value="">Todas las universidades</option>
                </select>

                <div class="date-group">
                    <input type="date" id="startDate" min="1990-01-01" max="2022-12-31" value="1990-01-01">
                    <input type="date" id="endDate" min="1990-01-01" max="2022-12-31" value="2022-12-31">
                </div>

                <select id="typeFilter">
                    <option value="">Todos los tipos</option>
                </select>
            </div>

            <!-- Contenedor de resultados -->
            <div id="patentList"></div>
            <div id="patentList"></div> <!-- ⚠️ Posible duplicado, ¿lo mantenemos? -->
            <div id="pagination"></div>
        </section>
    </main>

    <!-- ====== SCRIPT CHATBASE EMBED ====== -->
    <script>
        (function () {
            if (!window.chatbase || window.chatbase("getState") !== "initialized") {
                window.chatbase = (...arguments) => {
                    if (!window.chatbase.q) {
                        window.chatbase.q = [];
                    }
                    window.chatbase.q.push(arguments);
                };
                window.chatbase = new Proxy(window.chatbase, {
                    get(target, prop) {
                        if (prop === "q") {
                            return target.q;
                        }
                        return (...args) => target(prop, ...args);
                    }
                });
            }
            const onLoad = function () {
                const script = document.createElement("script");
                script.src = "https://www.chatbase.co/embed.min.js";
                script.id = "fiW7NkqSVbGfwIvmPgLh1";
                script.domain = "www.chatbase.co";
                document.body.appendChild(script);
            };
            if (document.readyState === "complete") {
                onLoad();
            } else {
                window.addEventListener("load", onLoad);
            }
        })();
    </script>

    <!-- ====== PIE DE PÁGINA ====== -->
    <footer>
        <p>
            © 2025 Aula PI – Aula de aprendizaje sobre propiedad intelectual de Castilla y León | 
            Recurso educativo desarrollado por 
            <strong>
                <a href="https://opensciencelab.uc3m.es/" target="_blank">OpenScienceLab UC3M</a>.
            </strong>
        </p>
    </footer>

    <!-- ====== SCRIPTS ====== -->
    <script src="patentes.js"></script>
    <script src="app.js"></script>
    <script src="script.js"></script>
</body>
</html>
